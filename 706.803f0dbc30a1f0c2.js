"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[706],{4706:(V,p,s)=>{s.r(p),s.d(p,{AdminModule:()=>L});var l=s(9808),m=s(9525),e=s(4893),d=s(1319),a=s(2382),u=s(1557),g=s(7261);function _(t,r){if(1&t&&(e.TgZ(0,"option",20),e._uU(1),e.qZA()),2&t){const n=r.$implicit;e.s9C("value",n.id),e.xp6(1),e.Oqu(n.name)}}function Z(t,r){1&t&&(e.TgZ(0,"span",21),e._UZ(1,"i",22),e._uU(2," Debe seleccionar un cliente "),e.qZA())}function b(t,r){if(1&t&&(e.TgZ(0,"option",20),e._uU(1),e.qZA()),2&t){const n=r.$implicit;e.s9C("value",n.name),e.xp6(1),e.Oqu(n.name)}}function h(t,r){1&t&&(e.TgZ(0,"span",21),e._UZ(1,"i",22),e._uU(2," Debe seleccionar una empresa "),e.qZA())}function A(t,r){1&t&&(e.TgZ(0,"span",21),e._UZ(1,"i",22),e._uU(2," Debe de ser mayor a 6 letras "),e.qZA())}function v(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"div",12),e._UZ(1,"hr"),e.TgZ(2,"div",3),e._UZ(3,"input",25),e.qZA(),e.TgZ(4,"div",14)(5,"button",26),e.NdJ("click",function(){const c=e.CHM(n).index;return e.oxw(2).deleteDocument(c)}),e._uU(6,"Eliminar"),e.qZA()()()}if(2&t){const n=r.index;e.xp6(3),e.Q6J("formControlName",n)}}function U(t,r){if(1&t&&(e.TgZ(0,"div",23)(1,"h5"),e._uU(2,"Documentos Agregados"),e.qZA(),e.YNc(3,v,7,1,"div",24),e.qZA()),2&t){const n=e.oxw();e.xp6(3),e.Q6J("ngForOf",n.documentsArr.controls)}}let C=(()=>{class t{constructor(n,o,i){this.fb=n,this.mainService=o,this.snackBar=i,this.miFormulario=this.fb.group({client:[,[a.kI.required]],contractor:[,[a.kI.required]],employment:[,[a.kI.required,a.kI.minLength(1)]],documents:this.fb.array([])}),this.newDocument=this.fb.control("",a.kI.required)}get documentsArr(){return this.miFormulario.get("documents")}ngOnInit(){this.mainService.getMandantes().subscribe(n=>{this.mandantes=n})}getMandante(){console.log("first",this.miFormulario.value.client),this.mainService.getEmploxmandanteAdmin(this.miFormulario.value.client).subscribe(n=>{this.employees=n})}campoEsValido(n){return this.miFormulario.controls[n].errors&&this.miFormulario.controls[n].touched}addDocument(){this.newDocument.invalid||(this.documentsArr.push(this.fb.control(this.newDocument.value,a.kI.required)),this.newDocument.reset())}deleteDocument(n){this.documentsArr.removeAt(n)}guardar(){if(this.miFormulario.invalid)return void this.miFormulario.markAllAsTouched();const o=this.miFormulario.value.documents;this.mainService.addEmployment({mandante:this.miFormulario.value.client,employee:this.miFormulario.value.contractor,employment:this.miFormulario.value.employment}).subscribe(c=>{o.map(f=>{this.mainService.addDocument({id_employment:c.id,name:f}).subscribe()}),this.mostrarSnackbar("Ocupaci\xf3n creada con \xe9xito","successSnackbar")});let i=this.documentsArr.length;do{this.documentsArr.removeAt(i),i--}while(this.documentsArr.length>0);this.miFormulario.reset()}mostrarSnackbar(n,o){this.snackBar.open(n,"Cerrar",{duration:3e3,panelClass:o})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(a.qu),e.Y36(u.J),e.Y36(g.ux))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-add-employment"]],decls:37,vars:8,consts:[["autocomplete","off",3,"formGroup","ngSubmit"],[1,"row","justify-content-end"],["for","client",1,"col-sm-3","col-form-label"],[1,"col-sm-9"],["formControlName","client","aria-label","Default select example","id","client",1,"form-select",3,"change"],[3,"value",4,"ngFor","ngForOf"],["class","form-text",4,"ngIf"],["for","contractor",1,"col-sm-3","col-form-label"],["formControlName","contractor","aria-label","Default select example","id","contractor",1,"form-select"],["for","employment",1,"col-sm-3","col-form-label"],["id","employment","type","text","formControlName","employment","placeholder","Ingrese la ocupaci\xf3n",1,"form-control"],["for","docs",1,"col-sm-3","col-form-label"],[1,"row","p-0","align-items-start"],["type","text","placeholder","Ingrese el nombre del documento",1,"form-control","mb-2",3,"formControl","keyup.enter"],[1,"col-sm-3"],["type","button",1,"btn","btn-secondary","w-100","m-0",3,"click"],["class","col-sm-9","formArrayName","documents",4,"ngIf"],[1,"d-flex","align-items-center","flex-column"],["type","submit",1,"btn","btn-primary","w-100","mx-0"],["type","button",1,"btn","btn-secondary","w-50","mx-0"],[3,"value"],[1,"form-text"],[1,"fa-solid","fa-circle-exclamation"],["formArrayName","documents",1,"col-sm-9"],["class","row p-0 align-items-start",4,"ngFor","ngForOf"],["readonly","","type","text",1,"form-control","mb-2",3,"formControlName"],["type","button",1,"btn","btn-cancel","w-100",3,"click"]],template:function(n,o){1&n&&(e.TgZ(0,"h4"),e._uU(1,"Crear nueva ocupaci\xf3n"),e.qZA(),e._UZ(2,"hr"),e.TgZ(3,"form",0),e.NdJ("ngSubmit",function(){return o.guardar()}),e.TgZ(4,"div",1)(5,"label",2),e._uU(6,"Cliente"),e.qZA(),e.TgZ(7,"div",3)(8,"select",4),e.NdJ("change",function(){return o.getMandante()}),e.YNc(9,_,2,2,"option",5),e.qZA(),e.YNc(10,Z,3,0,"span",6),e.qZA(),e.TgZ(11,"label",7),e._uU(12,"Contratista"),e.qZA(),e.TgZ(13,"div",3)(14,"select",8),e.YNc(15,b,2,2,"option",5),e.qZA(),e.YNc(16,h,3,0,"span",6),e.qZA(),e.TgZ(17,"label",9),e._uU(18,"Ocupaci\xf3n"),e.qZA(),e.TgZ(19,"div",3),e._UZ(20,"input",10),e.YNc(21,A,3,0,"span",6),e.qZA(),e.TgZ(22,"label",11),e._uU(23,"Documentos"),e.qZA(),e.TgZ(24,"div",3)(25,"div",12)(26,"div",3)(27,"input",13),e.NdJ("keyup.enter",function(){return o.addDocument()}),e.qZA()(),e.TgZ(28,"div",14)(29,"button",15),e.NdJ("click",function(){return o.addDocument()}),e._uU(30,"Agregar"),e.qZA()()()(),e.YNc(31,U,4,1,"div",16),e.qZA(),e.TgZ(32,"div",17)(33,"button",18),e._uU(34,"Guardar"),e.qZA(),e.TgZ(35,"button",19),e._uU(36,"Limpiar"),e.qZA()()()),2&n&&(e.xp6(3),e.Q6J("formGroup",o.miFormulario),e.xp6(6),e.Q6J("ngForOf",o.mandantes),e.xp6(1),e.Q6J("ngIf",o.campoEsValido("client")),e.xp6(5),e.Q6J("ngForOf",o.employees),e.xp6(1),e.Q6J("ngIf",o.campoEsValido("contractor")),e.xp6(5),e.Q6J("ngIf",o.campoEsValido("employment")),e.xp6(6),e.Q6J("formControl",o.newDocument),e.xp6(4),e.Q6J("ngIf",0!=o.documentsArr.length))},directives:[a._Y,a.JL,a.sg,a.EJ,a.JJ,a.u,l.sg,a.YN,a.Kr,l.O5,a.Fj,a.oH,a.CE],styles:["input[_ngcontent-%COMP%], label[_ngcontent-%COMP%], select[_ngcontent-%COMP%], option[_ngcontent-%COMP%]{color:#00395e!important}i[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{color:#d47077}label[_ngcontent-%COMP%]{font-size:14px}.col-sm-9[_ngcontent-%COMP%]{margin-bottom:.5em}[_ngcontent-%COMP%]::placeholder{color:#127bc185!important}.btn-cancel[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{padding:0;margin:0;height:38px}"]}),t})();function T(t,r){1&t&&(e.TgZ(0,"span",20),e._UZ(1,"i",21),e._uU(2," Debe de ser mayor a 3 letras "),e.qZA())}function y(t,r){1&t&&(e.TgZ(0,"span",20),e._UZ(1,"i",21),e._uU(2," Debe de ser un correo v\xe1lido "),e.qZA())}function q(t,r){1&t&&(e.TgZ(0,"span",20),e._UZ(1,"i",21),e._uU(2," Debe de ser una contrase\xf1a mayor a 6 letras "),e.qZA())}function x(t,r){1&t&&(e.TgZ(0,"span",20),e._UZ(1,"i",21),e._uU(2," Debe seleccionar un rol "),e.qZA())}function F(t,r){if(1&t&&(e.TgZ(0,"option",26),e._uU(1),e.qZA()),2&t){const n=r.$implicit;e.s9C("value",n.id),e.xp6(1),e.Oqu(n.name)}}function O(t,r){1&t&&(e.TgZ(0,"span",20),e._UZ(1,"i",21),e._uU(2," Debe seleccionar una empresa "),e.qZA())}function J(t,r){if(1&t&&(e.TgZ(0,"div",22)(1,"label",23),e._uU(2,"Mandante"),e.qZA(),e.TgZ(3,"div",3)(4,"select",24),e.YNc(5,F,2,2,"option",25),e.qZA(),e.YNc(6,O,3,0,"span",5),e.qZA()()),2&t){const n=e.oxw();e.xp6(5),e.Q6J("ngForOf",n.mandantes),e.xp6(1),e.Q6J("ngIf",n.campoEsValido("employee"))}}let M=(()=>{class t{constructor(n,o,i){this.fb=n,this.mainService=o,this.snackBar=i,this.loading=!1,this.miFormulario=this.fb.group({name:[,[a.kI.required,a.kI.minLength(3)]],email:[,[a.kI.required,a.kI.minLength(6),a.kI.email]],password:[,[a.kI.required,a.kI.minLength(6)]],role:[,[a.kI.required]],employee:[,]})}ngOnInit(){this.mainService.getMandantes().subscribe(n=>{this.mandantes=n},n=>{console.log("err",n)})}campoEsValido(n){return this.miFormulario.controls[n].errors&&this.miFormulario.controls[n].touched}guardar(){this.miFormulario.invalid?this.miFormulario.markAllAsTouched():(this.loading=!0,this.loading=!1,this.mainService.addUser(this.miFormulario.value).subscribe(n=>{this.mostrarSnackbar("Usuario creado correctamente","successSnackbar"),this.loading=!1},n=>{console.log(n.error.msg),this.mostrarSnackbar(n.error.msg,"errorSnackbar"),this.loading=!1}),this.miFormulario.reset())}mostrarSnackbar(n,o){this.snackBar.open(n,"Cerrar",{duration:3e3,panelClass:o})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(a.qu),e.Y36(u.J),e.Y36(g.ux))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-add-users"]],decls:39,vars:6,consts:[["autocomplete","off",3,"formGroup","ngSubmit"],[1,"mb-3","row"],["for","name",1,"col-sm-3","col-form-label"],[1,"col-sm-9"],["id","name","type","text","formControlName","name","placeholder","Ingrese el nombre",1,"form-control"],["class","form-text",4,"ngIf"],["for","email",1,"col-sm-3","col-form-label"],["id","email","type","email","formControlName","email","placeholder","Ingrese el correo",1,"form-control"],["for","password",1,"col-sm-3","col-form-label"],["id","password","type","password","formControlName","password","placeholder","Ingrese el password",1,"form-control"],["for","role",1,"col-sm-3","col-form-label"],["formControlName","role","aria-label","Default select example","id","role",1,"form-select"],["selected",""],["value","ADM"],["value","USM"],["value","USC"],["class","row m-0 p-0",4,"ngIf"],[1,"d-flex","align-items-center","flex-column"],["type","submit",1,"btn","btn-primary","w-100"],["type","button",1,"btn","btn-secondary","w-50",3,"click"],[1,"form-text"],[1,"fa-solid","fa-circle-exclamation"],[1,"row","m-0","p-0"],["for","employee",1,"col-sm-3","col-form-label"],["formControlName","employee","aria-label","Default select example","id","employee",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(n,o){1&n&&(e.TgZ(0,"h4"),e._uU(1,"Crear nuevo usuario"),e.qZA(),e._UZ(2,"hr"),e.TgZ(3,"form",0),e.NdJ("ngSubmit",function(){return o.guardar()}),e.TgZ(4,"div",1)(5,"label",2),e._uU(6,"Nombre"),e.qZA(),e.TgZ(7,"div",3),e._UZ(8,"input",4),e.YNc(9,T,3,0,"span",5),e.qZA(),e.TgZ(10,"label",6),e._uU(11,"Email"),e.qZA(),e.TgZ(12,"div",3),e._UZ(13,"input",7),e.YNc(14,y,3,0,"span",5),e.qZA(),e.TgZ(15,"label",8),e._uU(16,"Contrase\xf1a"),e.qZA(),e.TgZ(17,"div",3),e._UZ(18,"input",9),e.YNc(19,q,3,0,"span",5),e.qZA(),e.TgZ(20,"label",10),e._uU(21,"Rol"),e.qZA(),e.TgZ(22,"div",3)(23,"select",11)(24,"option",12),e._uU(25,"Selecciona un Rol"),e.qZA(),e.TgZ(26,"option",13),e._uU(27,"ADM"),e.qZA(),e.TgZ(28,"option",14),e._uU(29,"USM"),e.qZA(),e.TgZ(30,"option",15),e._uU(31,"USC"),e.qZA()(),e.YNc(32,x,3,0,"span",5),e.qZA(),e.YNc(33,J,7,2,"div",16),e.qZA(),e.TgZ(34,"div",17)(35,"button",18),e._uU(36,"Agregar"),e.qZA(),e.TgZ(37,"button",19),e.NdJ("click",function(){return o.miFormulario.reset()}),e._uU(38,"Limpiar"),e.qZA()()()),2&n&&(e.xp6(3),e.Q6J("formGroup",o.miFormulario),e.xp6(6),e.Q6J("ngIf",o.campoEsValido("name")),e.xp6(5),e.Q6J("ngIf",o.campoEsValido("email")),e.xp6(5),e.Q6J("ngIf",o.campoEsValido("password")),e.xp6(13),e.Q6J("ngIf",o.campoEsValido("role")),e.xp6(1),e.Q6J("ngIf","USC"==o.miFormulario.value.role))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,l.O5,a.EJ,a.YN,a.Kr,l.sg],styles:["input[_ngcontent-%COMP%], label[_ngcontent-%COMP%], select[_ngcontent-%COMP%], option[_ngcontent-%COMP%]{color:#00395e!important}i[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{color:#d47077}label[_ngcontent-%COMP%]{font-size:14px}.col-sm-9[_ngcontent-%COMP%]{margin-bottom:.5em}.btn-cancel[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{padding:0;margin:0;height:38px}[_ngcontent-%COMP%]::placeholder{color:#127bc185!important}"]}),t})(),S=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-config-page"]],decls:13,vars:0,consts:[[1,"container","my-5"],[1,"d-flex","justify-content-between"],["routerLink","../dashboard",1,"btn","btn-primary"],[1,"row"],[1,"col-12","col-md-8"],[1,"col-12","col-md-4"]],template:function(n,o){1&n&&(e._UZ(0,"app-navbar"),e.TgZ(1,"div",0)(2,"div",1)(3,"h1"),e._uU(4,"Configuraciones"),e.qZA(),e.TgZ(5,"button",2),e._uU(6,"volver"),e.qZA()(),e._UZ(7,"hr"),e.TgZ(8,"div",3)(9,"div",4),e._UZ(10,"app-add-employment"),e.qZA(),e.TgZ(11,"div",5),e._UZ(12,"app-add-users"),e.qZA()()())},directives:[d.S,m.rH,C,M],styles:[""]}),t})();var I=s(3745);const N=function(t){return["../enrolled",t]};function k(t,r){if(1&t&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.ALo(13,"date"),e.qZA(),e.TgZ(14,"td")(15,"div",8),e._UZ(16,"i",9)(17,"i",10)(18,"i",11),e.qZA()()()),2&t){const n=r.$implicit;e.xp6(2),e.Oqu(n.id),e.xp6(2),e.Oqu(n.name),e.xp6(2),e.Oqu(n.email),e.xp6(2),e.Oqu(n.role),e.xp6(2),e.Oqu(n.employee),e.xp6(2),e.Oqu(e.xi3(13,7,n.createdAt,"medium")),e.xp6(5),e.Q6J("routerLink",e.VKq(10,N,n.id))}}const E=function(){return[5,10,25,100]};let D=(()=>{class t{constructor(n){this.mainService=n,this.pageSize=10,this.start=0,this.end=10,this.items=[],this.mainService.getUsers().subscribe(o=>{this.items=o})}ngOnInit(){}cambiarPagina(n){this.start=n.pageIndex*n.pageSize,this.end=this.start+n.pageSize}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(u.J))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-table-users"]],decls:28,vars:9,consts:[[1,"container","my-3"],[1,"d-flex","align-items-end","justify-content-between"],["data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-primary"],[1,"table","table-hover","p-3"],[1,""],["scope","col"],[4,"ngFor","ngForOf"],[3,"length","pageSize","pageSizeOptions","page"],[1,"d-flex","justify-content-evenly"],[1,"fa-regular","fa-pen-to-square"],[1,"fa-regular","fa-address-card",3,"routerLink"],[1,"fa-regular","fa-trash-can"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2"),e._uU(3,"Lista de Usuarios"),e.qZA(),e.TgZ(4,"button",2),e._uU(5,"Filtrar"),e.qZA()(),e._UZ(6,"hr"),e.TgZ(7,"table",3)(8,"thead",4)(9,"tr")(10,"th",5),e._uU(11,"Id"),e.qZA(),e.TgZ(12,"th",5),e._uU(13,"Nombre"),e.qZA(),e.TgZ(14,"th",5),e._uU(15,"Email"),e.qZA(),e.TgZ(16,"th",5),e._uU(17,"Rol"),e.qZA(),e.TgZ(18,"th",5),e._uU(19,"Mandante"),e.qZA(),e.TgZ(20,"th",5),e._uU(21,"Creaci\xf3n"),e.qZA(),e.TgZ(22,"th",5),e._uU(23,"Opciones"),e.qZA()()(),e.TgZ(24,"tbody"),e.YNc(25,k,19,12,"tr",6),e.ALo(26,"slice"),e.qZA()(),e.TgZ(27,"mat-paginator",7),e.NdJ("page",function(c){return o.cambiarPagina(c)}),e.qZA()()),2&n&&(e.xp6(25),e.Q6J("ngForOf",e.Dn7(26,4,o.items,o.start,o.end)),e.xp6(2),e.Q6J("length",o.items.length)("pageSize",o.pageSize)("pageSizeOptions",e.DdM(8,E)))},directives:[l.sg,m.rH,I.NW],pipes:[l.OU,l.uU],styles:[""]}),t})();const P=[{path:"",children:[{path:"dashboard",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-dashboard-page"]],decls:9,vars:0,consts:[[1,"container","my-5"],[1,"d-flex","justify-content-between"],["routerLink","../config",1,"btn","btn-primary"]],template:function(n,o){1&n&&(e._UZ(0,"app-navbar"),e.TgZ(1,"div",0)(2,"div",1)(3,"h1"),e._uU(4,"Dashboard"),e.qZA(),e.TgZ(5,"button",2),e._uU(6,"ir a configuraciones"),e.qZA()(),e._UZ(7,"hr")(8,"app-table-users"),e.qZA())},directives:[d.S,m.rH,D],styles:[""]}),t})()},{path:"config",component:S},{path:"**",redirectTo:"dashboard"}]}];let w=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[m.Bz.forChild(P)],m.Bz]}),t})();var Y=s(4466),Q=s(7939);let L=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[l.ez,w,Y.m,Q.s,a.UX]]}),t})()}}]);