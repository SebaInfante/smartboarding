"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[713],{4713:(H,_,d)=>{d.r(_),d.d(_,{EnrollModule:()=>B});var m,g=d(9808),c=d(9525),v=new Uint8Array(16);function b(){if(!m&&!(m="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return m(v)}const T=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,A=function M(t){return"string"==typeof t&&T.test(t)};for(var s=[],f=0;f<256;++f)s.push((f+256).toString(16).substr(1));const q=function x(t,a,n){var o=(t=t||{}).random||(t.rng||b)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,a){n=n||0;for(var l=0;l<16;++l)a[n+l]=o[l];return a}return function C(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(s[t[a+0]]+s[t[a+1]]+s[t[a+2]]+s[t[a+3]]+"-"+s[t[a+4]]+s[t[a+5]]+"-"+s[t[a+6]]+s[t[a+7]]+"-"+s[t[a+8]]+s[t[a+9]]+"-"+s[t[a+10]]+s[t[a+11]]+s[t[a+12]]+s[t[a+13]]+s[t[a+14]]+s[t[a+15]]).toLowerCase();if(!A(n))throw TypeError("Stringified UUID is invalid");return n}(o)};var e=d(4893),h=d(1557),Z=d(1319),r=d(2382);function y(t,a){1&t&&(e.TgZ(0,"div"),e._uU(1," cargar docs "),e.qZA())}function E(t,a){if(1&t&&(e.TgZ(0,"option",33),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.s9C("value",n.id),e.xp6(1),e.Oqu(n.name)}}function F(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"div",7)(1,"label",30),e._uU(2,"Empresa"),e.qZA(),e.TgZ(3,"select",31),e.NdJ("ngModelChange",function(l){return e.CHM(n),e.oxw().trabajador.empresa=l}),e.YNc(4,E,2,2,"option",32),e.qZA()()}if(2&t){const n=e.oxw();e.xp6(3),e.Q6J("ngModel",n.trabajador.empresa),e.xp6(1),e.Q6J("ngForOf",n.employees)}}let O=(()=>{class t{constructor(n){this.mainService=n,this.isADM=!1,this.isUSM=!1,this.trabajador={id:q(),nombre:"",rut:"",avatar:"",turno:"",ocupacion:"",empresa:"",documentos:{doc1:"url"}},this.seleccionarAvatar=o=>{o?this.avatar=o.target.files[0]:console.log("Archivo no encontrado")}}ngOnInit(){"ADM"===sessionStorage.getItem("role")&&(this.mainService.getEmpleadosXadmin().subscribe(n=>{this.employees=n}),this.isADM=!0),"USM"===sessionStorage.getItem("role")&&(this.mainService.getEmpleadosXmandante().subscribe(n=>{this.employees=n}),this.isUSM=!0)}subirArchivo(){this.avatar?this.mainService.upFile(this.avatar,this.trabajador.id):console.log("Archivo no encontrado")}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(h.J))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-enroll-page"]],decls:59,vars:7,consts:[[1,"container","my-3"],[1,"mx-5"],[1,"row"],[1,"col-12","col-md-6"],[1,"mb-5"],["for","nombre"],["type","text","id","nombre","name","nombre",1,"input-text","w-100",3,"ngModel","ngModelChange"],[1,"my-5"],["for","rut"],["type","text","id","rut","name","rut",1,"input-text","w-100",3,"ngModel","ngModelChange"],["for","avatar"],[1,"input-group"],["type","file","id","avatar","aria-describedby","inputGroupFileAddon04","aria-label","Upload","name","avatar",1,"form-control","file-update",3,"ngModel","change","ngModelChange"],["type","button","id","inputGroupFileAddon04",1,"btn","btn-secondary",3,"click"],["for","turno"],["aria-label","Default select example","id","turno","name","turno",1,"form-select",3,"ngModel","ngModelChange"],["selected",""],["value","1"],["value","2"],["value","3"],["aria-label","Default select example","id","ocupacion","name","ocupacion",1,"form-select",3,"ngModel","ngModelChange"],[4,"ngIf"],["class","my-5",4,"ngIf"],[1,"col-12","col-md-6","px-5"],["src","https://us.123rf.com/450wm/pavelstasevich/pavelstasevich1811/pavelstasevich181101028/112815904-no-hay-icono-de-imagen-disponible-ilustraci%C3%B3n-vectorial-plana.jpg",1,"rounded-circle","shadow","w-100","mb-5"],[1,"d-flex","align-items-center","flex-column"],[1,"btn","btn-primary","w-100","m-0","mb-3"],[1,"btn","btn-cancel","w-50","m-0"],[1,"button-fab"],[1,"fa-solid","fa-question"],["for","empresa"],["aria-label","Default select example","id","empresa","name","empresa",1,"form-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(n,o){1&n&&(e._UZ(0,"app-navbar"),e.TgZ(1,"div",0)(2,"form")(3,"h3",1),e._uU(4,"Formulario de enrolamiento"),e.qZA(),e._UZ(5,"hr"),e.TgZ(6,"div",2)(7,"div",3)(8,"div",4)(9,"label",5),e._uU(10,"Nombre"),e.qZA(),e.TgZ(11,"input",6),e.NdJ("ngModelChange",function(i){return o.trabajador.nombre=i}),e.qZA()(),e.TgZ(12,"div",7)(13,"label",8),e._uU(14,"Rut"),e.qZA(),e.TgZ(15,"input",9),e.NdJ("ngModelChange",function(i){return o.trabajador.rut=i}),e.qZA()(),e.TgZ(16,"div",7)(17,"label",10),e._uU(18,"Foto"),e.qZA(),e.TgZ(19,"div",11)(20,"input",12),e.NdJ("change",function(i){return o.seleccionarAvatar(i)})("ngModelChange",function(i){return o.trabajador.avatar=i}),e.qZA(),e.TgZ(21,"button",13),e.NdJ("click",function(){return o.subirArchivo()}),e._uU(22,"Subir"),e.qZA()()(),e.TgZ(23,"div",7)(24,"label",14),e._uU(25,"Turno"),e.qZA(),e.TgZ(26,"select",15),e.NdJ("ngModelChange",function(i){return o.trabajador.turno=i}),e.TgZ(27,"option",16),e._uU(28,"Todos"),e.qZA(),e.TgZ(29,"option",17),e._uU(30,"One"),e.qZA(),e.TgZ(31,"option",18),e._uU(32,"Two"),e.qZA(),e.TgZ(33,"option",19),e._uU(34,"Three"),e.qZA()()(),e.TgZ(35,"div",7)(36,"label",14),e._uU(37,"Ocupaci\xf3n"),e.qZA(),e.TgZ(38,"select",20),e.NdJ("ngModelChange",function(i){return o.trabajador.ocupacion=i}),e.TgZ(39,"option",16),e._uU(40,"Todos"),e.qZA(),e.TgZ(41,"option",17),e._uU(42,"One"),e.qZA(),e.TgZ(43,"option",18),e._uU(44,"Two"),e.qZA(),e.TgZ(45,"option",19),e._uU(46,"Three"),e.qZA()()(),e.YNc(47,y,2,0,"div",21),e.YNc(48,F,5,2,"div",22),e.qZA(),e.TgZ(49,"div",23),e._UZ(50,"img",24),e.qZA()(),e.TgZ(51,"div",25)(52,"button",26),e._uU(53,"Enrolar"),e.qZA(),e.TgZ(54,"button",27),e._uU(55,"Cancelar"),e.qZA()()()(),e.TgZ(56,"div",28)(57,"button"),e._UZ(58,"i",29),e.qZA()()),2&n&&(e.xp6(11),e.Q6J("ngModel",o.trabajador.nombre),e.xp6(4),e.Q6J("ngModel",o.trabajador.rut),e.xp6(5),e.Q6J("ngModel",o.trabajador.avatar),e.xp6(6),e.Q6J("ngModel",o.trabajador.turno),e.xp6(12),e.Q6J("ngModel",o.trabajador.ocupacion),e.xp6(9),e.Q6J("ngIf","1"==o.trabajador.ocupacion),e.xp6(1),e.Q6J("ngIf",o.isADM||o.isUSM))},directives:[Z.S,r._Y,r.JL,r.F,r.Fj,r.JJ,r.On,r.EJ,r.YN,r.Kr,g.O5,g.sg],styles:["input[_ngcontent-%COMP%]{height:38px}.file-update[_ngcontent-%COMP%]{height:38px;box-shadow:0 4px 4px #00385e6e;margin-right:10px}.btn-secondary[_ngcontent-%COMP%]{box-shadow:0 4px 4px #00385e6e;margin:0 0 0 10px;height:38px}"]}),t})();var J=d(3745),u=d(7322),p=d(6856),P=d(773);function S(t,a){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"Invalid start date"),e.qZA())}function N(t,a){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"Invalid end date"),e.qZA())}function w(t,a){if(1&t&&(e.TgZ(0,"option",36),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.s9C("value",n.id),e.xp6(1),e.Oqu(n.name)}}function I(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"div",32),e._UZ(1,"hr"),e.TgZ(2,"label",33),e._uU(3,"Empresas"),e.qZA(),e.TgZ(4,"select",34),e.NdJ("ngModelChange",function(l){return e.CHM(n),e.oxw().contratista=l}),e.TgZ(5,"option",22),e._uU(6,"Todas"),e.qZA(),e.YNc(7,w,2,2,"option",35),e.qZA()()}if(2&t){const n=e.oxw();e.xp6(4),e.Q6J("ngModel",n.contratista),e.xp6(3),e.Q6J("ngForOf",n.contratistas)}}function Y(t,a){1&t&&(e.TgZ(0,"div",37),e._UZ(1,"mat-spinner"),e.TgZ(2,"h4"),e._uU(3,"Cargando ..."),e.qZA()())}let j=(()=>{class t{constructor(n){this.mainService=n,this.registrosFiltrados=new e.vpe,this.termino="",this.contratistas=[{id:"",name:""}],this.isAdmin=!1,this.isMandante=!1,this.rangeModal=new r.cw({start:new r.NI,end:new r.NI}),this.loading=!1,this.filtrar=()=>{let o;this.loading=!0,o=this.rangeModal.value.end?new Date(this.rangeModal.value.end).toISOString().split("T",1).toString():"";const V={fecha:o,intervalo:Math.abs(this.rangeModal.value.start-this.rangeModal.value.end)/864e5,name:this.isName(),rut:this.isRut(),turno:this.turno,contratista:this.contratista};this.mainService.getPersons(V).subscribe(G=>{this.loading=!1,this.registrosFiltrados.emit(G)})}}ngOnInit(){"ADM"===sessionStorage.getItem("role")&&(this.isAdmin=!0),"USM"===sessionStorage.getItem("role")&&(this.isMandante=!0),(this.isAdmin||this.isMandante)&&this.mainService.getEmpleadosXmandante().subscribe(n=>this.contratistas=n)}isName(){if(""!==this.termino.trim()){const n=this.termino.trim().substring(0,this.termino.length-1);return isNaN(n.trim())?this.termino:""}return""}isRut(){if(""!==this.termino.trim()){const n=this.termino.trim().substring(0,this.termino.length-1);return isNaN(n.trim())?"":this.termino}return""}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(h.J))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-filter-modal"]],outputs:{registrosFiltrados:"registrosFiltrados"},decls:60,vars:9,consts:[["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"filter"],[1,"d-flex","flex-column","mb-2"],["for","busqueda"],[1,"d-flex"],["name","termino","id","busqueda","type","text","placeholder","Ingresa el termino de busqueda",1,"input-text","w-100","mr-2",3,"ngModel","ngModelChange"],["for",""],["appearance","fill",1,"w-100"],[3,"formGroup","rangePicker"],["matStartDate","","formControlName","start","placeholder","Start date"],["matEndDate","","formControlName","end","placeholder","End date"],["matSuffix","",3,"for"],["picker",""],[4,"ngIf"],["for","turno"],["aria-label","Default select example","id","turno","name","turno",1,"form-select",3,"ngModel","ngModelChange"],["selected",""],["value","1"],["value","2"],["value","3"],["aria-label","Default select example","id","turno",1,"form-select"],["class","",4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary",3,"click"],["class","alert mt-5 pt-5 text-center d-flex align-items-center flex-column","role","alert",4,"ngIf"],[1,""],["for","empresa"],["aria-label","Default select example","id","empresa","name","contratista",1,"form-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["role","alert",1,"alert","mt-5","pt-5","text-center","d-flex","align-items-center","flex-column"]],template:function(n,o){if(1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),e._uU(5,"Filtros"),e.qZA(),e._UZ(6,"button",5),e.qZA(),e.TgZ(7,"div",6)(8,"form",7)(9,"div",8)(10,"label",9),e._uU(11,"Busca por nombre o por rut"),e.qZA(),e.TgZ(12,"div",10)(13,"input",11),e.NdJ("ngModelChange",function(i){return o.termino=i}),e.qZA()()(),e._UZ(14,"hr"),e.TgZ(15,"label",12),e._uU(16,"Registros por fecha"),e.qZA(),e.TgZ(17,"mat-form-field",13)(18,"mat-label"),e._uU(19,"Ingresa el rango de fecha"),e.qZA(),e.TgZ(20,"mat-date-range-input",14),e._UZ(21,"input",15)(22,"input",16),e.qZA(),e.TgZ(23,"mat-hint"),e._uU(24,"MM/DD/YYYY \u2013 MM/DD/YYYY"),e.qZA(),e._UZ(25,"mat-datepicker-toggle",17)(26,"mat-date-range-picker",null,18),e.YNc(28,S,2,0,"mat-error",19),e.YNc(29,N,2,0,"mat-error",19),e.qZA(),e._UZ(30,"hr"),e.TgZ(31,"label",20),e._uU(32,"Turno"),e.qZA(),e.TgZ(33,"select",21),e.NdJ("ngModelChange",function(i){return o.turno=i}),e.TgZ(34,"option",22),e._uU(35,"Todos"),e.qZA(),e.TgZ(36,"option",23),e._uU(37,"Entrada"),e.qZA(),e.TgZ(38,"option",24),e._uU(39,"Salida"),e.qZA(),e.TgZ(40,"option",25),e._uU(41,"No se sabe"),e.qZA()(),e.TgZ(42,"label",20),e._uU(43,"Ocupaci\xf3n"),e.qZA(),e.TgZ(44,"select",26)(45,"option",22),e._uU(46,"Todos"),e.qZA(),e.TgZ(47,"option",23),e._uU(48,"Ocupacion 1"),e.qZA(),e.TgZ(49,"option",24),e._uU(50,"Ocupacion 2"),e.qZA(),e.TgZ(51,"option",25),e._uU(52,"Ocupacion 3"),e.qZA()(),e.YNc(53,I,8,2,"div",27),e.qZA()(),e.TgZ(54,"div",28)(55,"button",29),e._uU(56,"Cerrar"),e.qZA(),e.TgZ(57,"button",30),e.NdJ("click",function(){return o.filtrar()}),e._uU(58,"Filtrar"),e.qZA()()()()(),e.YNc(59,Y,4,0,"div",31)),2&n){const l=e.MAs(27);e.xp6(13),e.Q6J("ngModel",o.termino),e.xp6(7),e.Q6J("formGroup",o.rangeModal)("rangePicker",l),e.xp6(5),e.Q6J("for",l),e.xp6(3),e.Q6J("ngIf",o.rangeModal.controls.start.hasError("matStartDateInvalid")),e.xp6(1),e.Q6J("ngIf",o.rangeModal.controls.end.hasError("matEndDateInvalid")),e.xp6(4),e.Q6J("ngModel",o.turno),e.xp6(20),e.Q6J("ngIf",o.isAdmin||o.isMandante),e.xp6(6),e.Q6J("ngIf",o.loading)}},directives:[r._Y,r.JL,r.F,r.Fj,r.JJ,r.On,u.KE,u.hX,p.wx,r.sg,p.zY,r.u,p.By,u.bx,p.nW,u.R9,p._g,g.O5,u.TO,r.EJ,r.YN,r.Kr,g.sg,P.Ou],styles:[".modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;z-index:-1!important;width:100vw;height:100vh;background-color:#f10404}.cdk-overlay-container[_ngcontent-%COMP%]{position:fixed;z-index:99999999999!important}.modal-dialog[_ngcontent-%COMP%], #exampleModal[_ngcontent-%COMP%]{z-index:900}[_ngcontent-%COMP%]::placeholder{color:gray!important;font-weight:300;font-size:.8rem}"]}),t})();const D=function(t){return["../enrolled",t]};function Q(t,a){if(1&t&&(e.TgZ(0,"tr")(1,"td"),e._UZ(2,"img",9),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.ALo(15,"date"),e.qZA(),e.TgZ(16,"td")(17,"div",10),e._UZ(18,"i",11)(19,"i",12)(20,"i",13),e.qZA()()()),2&t){const n=a.$implicit;e.xp6(2),e.MGl("src","http://173.249.58.215:9000",n.resource_url,"",e.LSH),e.xp6(2),e.Oqu(n.name),e.xp6(2),e.Oqu(n.id_card),e.xp6(2),e.Oqu(n.turno),e.xp6(2),e.Oqu(n.ocupacion),e.xp6(2),e.Oqu(n.empresa),e.xp6(2),e.Oqu(e.xi3(15,8,n.create_time,"medium")),e.xp6(5),e.Q6J("routerLink",e.VKq(11,D,n.id))}}const z=function(){return[5,10,25,100]},R=[{path:"",component:O},{path:"enrolled",component:(()=>{class t{constructor(n){this.mainService=n,this.pageSize=10,this.start=0,this.end=10,this.items=[],this.parametres={},this.mainService.getPersons(this.parametres).subscribe(o=>{this.items=o})}ngOnInit(){}cambiarPagina(n){this.start=n.pageIndex*n.pageSize,this.end=this.start+n.pageSize}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(h.J))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-enrolled-page"]],decls:32,vars:9,consts:[[1,"container","my-3"],[1,"d-flex","align-items-end","justify-content-between"],["data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-primary"],[1,"table","table-hover","p-3"],[1,""],["scope","col"],[4,"ngFor","ngForOf"],[3,"length","pageSize","pageSizeOptions","page"],[3,"registrosFiltrados"],["alt","",1,"table-avatar",3,"src"],[1,"d-flex","justify-content-evenly"],[1,"fa-regular","fa-pen-to-square"],[1,"fa-regular","fa-address-card",3,"routerLink"],[1,"fa-regular","fa-trash-can"]],template:function(n,o){1&n&&(e._UZ(0,"app-navbar"),e.TgZ(1,"div",0)(2,"div",1)(3,"h2"),e._uU(4,"Lista de enrolados"),e.qZA(),e.TgZ(5,"button",2),e._uU(6,"Filtrar"),e.qZA()(),e._UZ(7,"hr"),e.TgZ(8,"table",3)(9,"thead",4)(10,"tr")(11,"th",5),e._uU(12,"Avatar"),e.qZA(),e.TgZ(13,"th",5),e._uU(14,"Nombre"),e.qZA(),e.TgZ(15,"th",5),e._uU(16,"Rut"),e.qZA(),e.TgZ(17,"th",5),e._uU(18,"Turno"),e.qZA(),e.TgZ(19,"th",5),e._uU(20,"Ocupaci\xf3n"),e.qZA(),e.TgZ(21,"th",5),e._uU(22,"Empresa"),e.qZA(),e.TgZ(23,"th",5),e._uU(24,"Creaci\xf3n"),e.qZA(),e.TgZ(25,"th",5),e._uU(26,"Opciones"),e.qZA()()(),e.TgZ(27,"tbody"),e.YNc(28,Q,21,13,"tr",6),e.ALo(29,"slice"),e.qZA()(),e.TgZ(30,"mat-paginator",7),e.NdJ("page",function(i){return o.cambiarPagina(i)}),e.qZA()(),e.TgZ(31,"app-filter-modal",8),e.NdJ("registrosFiltrados",function(i){return o.items=i}),e.qZA()),2&n&&(e.xp6(28),e.Q6J("ngForOf",e.Dn7(29,4,o.items,o.start,o.end)),e.xp6(2),e.Q6J("length",o.items.length)("pageSize",o.pageSize)("pageSizeOptions",e.DdM(8,z)))},directives:[Z.S,g.sg,c.rH,J.NW,j],pipes:[g.OU,g.uU],styles:[".container[_ngcontent-%COMP%]{overflow-x:auto}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{text-align:left}.modal-backdrop[_ngcontent-%COMP%]{z-index:0!important}.cdk-overlay-container[_ngcontent-%COMP%]{position:fixed;z-index:99999999999!important}"]}),t})()},{path:"enrolled/:id",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-user-enrolled-page"]],decls:2,vars:0,template:function(n,o){1&n&&(e.TgZ(0,"p"),e._uU(1,"user-enrolled-page works!"),e.qZA())},styles:[""]}),t})()},{path:"**",redirectTo:"enroll"}];let k=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[c.Bz.forChild(R)],c.Bz]}),t})();var L=d(4466),X=d(7939);let B=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[g.ez,k,L.m,X.s,r.u5,r.UX]]}),t})()}}]);